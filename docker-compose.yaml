
version: '3.7'
services:
    nginx:
      image: nginx:latest
      ports:
        - target: 80
          published: 80
          protocol: tcp
      volumes:
        - type: bind
          source: ./nginx/nginx.conf
          target: /etc/nginx/nginx.conf

    app:
       image: jenkins-vm:5000/app:build-0
       build: 
        context: ./service4
        dockerfile: ../Dockerfile
    service1:  
       image: jenkins-vm:5000/service1:build-0
       build:
        context: ./service1/
        dockerfile: ../Dockerfile
    service2: 
       image: jenkins-vm:5000/service2:build-0
       build: 
        context: ./service2/
        dockerfile: ../Dockerfile
    service3: 
       image: jenkins-vm:5000/service3:build-0
       build:
        context: ./service3/
        dockerfile: ../Dockerfile



